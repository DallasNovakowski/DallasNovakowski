<p>One major challenge in data visualization is making plots that are both transparent and simple. Raincloud plots are a recent addition to the collective data science toolbox, allowing for raw data, density distributions, and boxplots to be presented simultaneously. Here, we’ll explore a modification, the <em>fadecloud</em> (or maybe rampcloud, boxcloud, intervalcloud, quantcloud, rangecloud) that seeks to substitute boxplots by shading in the density distribution.</p>
<p><img src="index.en_files/figure-html/rain-box-mean-1.png" width="672" /></p>
<p>At the end of the day, raincloud plots are not a simple way to vizualize data. I think bar plots have been so ubiquitous because there is some hard-wired intuition in us that understands “more bar is more number.”</p>
<p>I’ve tried using raincloud plots, but I often need to add extra geoms like the mean and confidence intervals. By the end, there is more visual clutter than I’d like. I find that in a raincloud plot, a density distribution and boxplot overlap in capturing the variable’s locality, spread, and skewness. The major difference is that boxplots visualize discrete values and cutoffs, whereas the density distribution provides a more holistic picture of the data. Combining the boxplot and density objects might help improve the plot’s efficiency, by coloring the density curve according to important quantiles.</p>
<!-- I suggest that the plot space can be used more efficiently by c -->
<!-- The raincloudplots package can create some beautiful and elegant plots. -->
<div id="getting-started" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Getting started</h1>
<p>Load packages…</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdist) <span class="co"># for shadeable density slabs</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># library(ggbeeswarm)</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gghalves) <span class="co"># for half-half geoms</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpp) <span class="co"># for position_dodge2nudge</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot) <span class="co"># for publication-ready themes</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(colorspace) <span class="co"># for lightening color palettes</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra) <span class="co"># for grid.arrange</span></span></code></pre></div>
<p>Create data…</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">score =</span> <span class="fu">rgamma</span>(<span class="dv">300</span>, <span class="dv">4</span>, <span class="dv">1</span>), </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">owner =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;dogs&quot;</span>, <span class="st">&quot;cats&quot;</span>), <span class="dv">300</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>), </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">genotype =</span> <span class="fu">factor</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">300</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>Set ggplot canvas and styling…</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting colorblind-friendly palette</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>cbPalette <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;#999999&quot;</span>,<span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>,<span class="st">&quot;#009E73&quot;</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;#F0E442&quot;</span>, <span class="st">&quot;#0072B2&quot;</span>, <span class="st">&quot;#D55E00&quot;</span>,<span class="st">&quot;#CC79A7&quot;</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>cbPalette <span class="ot">&lt;-</span> <span class="fu">lighten</span>(cbPalette, <span class="at">amount =</span> <span class="fl">0.6</span>, <span class="at">space =</span> <span class="st">&quot;HLS&quot;</span>,)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>cbPalette1 <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;#999999&quot;</span>,<span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>,<span class="st">&quot;#009E73&quot;</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;#F0E442&quot;</span>, <span class="st">&quot;#0072B2&quot;</span>, <span class="st">&quot;#D55E00&quot;</span>,<span class="st">&quot;#CC79A7&quot;</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot canvas</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>cloudplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df, </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">aes</span>(<span class="at">y =</span> score, <span class="at">x =</span> genotype, <span class="at">shape =</span> owner, <span class="at">fill =</span> owner)) <span class="sc">+</span>   </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_half_open</span>() <span class="sc">+</span>  </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> cbPalette, <span class="at">aesthetics =</span> <span class="fu">c</span>(<span class="st">&quot;colour&quot;</span>,<span class="st">&quot;fill&quot;</span>)) <span class="sc">+</span>  </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill_ramp =</span> <span class="st">&quot;none&quot;</span>,<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">5</span>))) </span></code></pre></div>
</div>
<div id="fading-or-shading-your-distribution" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Fading (or shading) your distribution</h1>
<p>Right now, the easiest way to include shading into a density distribution is through the <code>ggdist</code> package. In my eyes, <code>ggdist</code> is a dark horse in the data science ecosystem. It doesn’t get a lot of attention in your average forum or blog, but it has loads of functionality for visualizing distributions and uncertainty.</p>
<p>The fading is accomplished through the <code>fill_ramp</code> aesthetic, in combination with the <code>.width</code> attribute, which specifies the quantiles you want to shade. I personally like the <code>c(.50, .95, 1)</code> setting, which gives an intuitive picture of the inner- and outer- halves, while showing outliers beyond the 95th percentile, but you can change the quantiles to suit your needs. The shading defaults to white, but you can also modify it to ramp towards other colors.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df, <span class="fu">aes</span>(<span class="at">y =</span> score, <span class="at">x =</span> genotype)) <span class="sc">+</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># density distribution slab</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_slab</span>(<span class="at">side =</span> <span class="st">&quot;both&quot;</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">scale =</span> <span class="fl">0.6</span>, <span class="co"># defines the height that a slab can reach</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width=</span>.<span class="dv">6</span>), <span class="co"># distance between elements for dodging</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">fill_ramp =</span> <span class="fu">stat</span>(level),<span class="at">fill=</span>owner), </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">.width =</span> <span class="fu">c</span>(.<span class="dv">20</span>, .<span class="dv">40</span>,.<span class="dv">60</span>,.<span class="dv">80</span>,<span class="dv">1</span>)) <span class="sc">+</span>  <span class="co"># set quantiles for shading</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># styling</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_ramp_discrete</span>(<span class="at">from=</span><span class="st">&#39;black&#39;</span>, <span class="at">aesthetics =</span> <span class="st">&quot;fill_ramp&quot;</span>)<span class="sc">+</span> <span class="co"># set ramping color</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>( <span class="co"># change name and display of legend elements</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">color=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span> <span class="co"># suppresses color legend item) </span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> cbPalette, <span class="at">aesthetics =</span> <span class="fu">c</span>(<span class="st">&quot;colour&quot;</span>,<span class="st">&quot;fill&quot;</span>))<span class="sc">+</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_half_open</span>()</span></code></pre></div>
<p><img src="index.en_files/figure-html/v-fade-vio-1.png" width="672" /></p>
<p>Despite the questionable coloring, you can see how fill_ramp can also be used for violin plots. So when you want a more streamlined, aggregated plot, you have another option beyond just choosing either a violin plot or a boxplot.</p>
</div>
<div id="adding-raw-data" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Adding raw data</h1>
<p>An alternative to jittering your raw data is the <code>ggdist::stat_dots</code> element. To address overplotting, <code>stat_dots</code> opts for stacking and resizing points. The resulting raw data looks more “drippy” than “rainy,” but I think the stacking ultimately makes the raw data more useful when trying to identify over/under-populated bins (e.g., many respondents answering at the min, median, or max points of a self-report scale). In addition, the stacking has a crisp look that I find very satisfying.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>fadecloud <span class="ot">&lt;-</span> cloudplot <span class="sc">+</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_slab</span>(<span class="at">side =</span> <span class="st">&quot;right&quot;</span>, <span class="at">scale =</span> <span class="fl">0.4</span>,<span class="at">show.legend =</span> F,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">8</span>),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">fill_ramp =</span> <span class="fu">stat</span>(level)),<span class="at">.width =</span> <span class="fu">c</span>(.<span class="dv">50</span>, .<span class="dv">95</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dots</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_dots</span>(<span class="at">side =</span> <span class="st">&quot;left&quot;</span>,<span class="at">scale =</span> <span class="fl">0.4</span>,<span class="at">show.legend =</span> T,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">8</span>),<span class="fu">aes</span>(<span class="at">color =</span> owner)) <span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dot-whisker for means</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> <span class="st">&quot;mean_cl_normal&quot;</span>,<span class="at">show.legend =</span> <span class="cn">FALSE</span>,<span class="at">size =</span> .<span class="dv">4</span>,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge2nudge</span>(<span class="at">x=</span>.<span class="dv">05</span>,<span class="at">width =</span> .<span class="dv">8</span>))</span></code></pre></div>
<p><img src="index.en_files/figure-html/present-fadecloud-1.png" width="672" /></p>
<p><code>stat_dots</code> can be used with large samples as well. You can adjust the quantiles argument to change the granularity of the points; size of points change automatically. Generally, more quantiles will give your raw data more and smaller bins, looking more like a histogram. Fewer quantiles will look like a dotty reflection of your density curve.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">score =</span> <span class="fu">rgamma</span>(<span class="dv">3000</span>, <span class="dv">4</span>, <span class="dv">1</span>), </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">owner =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;dogs&quot;</span>, <span class="st">&quot;cats&quot;</span>), <span class="dv">3000</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>), </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">genotype =</span> <span class="fu">factor</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">3000</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df2, </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> score,<span class="at">x =</span> genotype,<span class="at">fill =</span> owner)) <span class="sc">+</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># density slab</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_slab</span>(<span class="at">side =</span> <span class="st">&quot;right&quot;</span>, <span class="at">scale =</span> <span class="fl">0.4</span>, </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">8</span>),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">fill_ramp =</span> <span class="fu">stat</span>(level)),<span class="at">.width =</span> <span class="fu">c</span>(.<span class="dv">50</span>, .<span class="dv">95</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>   <span class="co"># dots</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_dots</span>(<span class="at">side =</span> <span class="st">&quot;left&quot;</span>,<span class="at">scale =</span> <span class="fl">0.4</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">8</span>),<span class="fu">aes</span>(<span class="at">color =</span> owner)) <span class="sc">+</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># dot-whisker for means</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> <span class="st">&quot;mean_cl_normal&quot;</span>,<span class="at">show.legend =</span> T,<span class="at">size =</span> .<span class="dv">4</span>,<span class="fu">aes</span>(<span class="at">shape=</span>owner),</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge2nudge</span>(<span class="at">x=</span>.<span class="dv">05</span>,<span class="at">width =</span> .<span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># styling</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> cbPalette, <span class="at">aesthetics =</span> <span class="fu">c</span>(<span class="st">&quot;colour&quot;</span>,<span class="st">&quot;fill&quot;</span>))<span class="sc">+</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill_ramp =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span> </span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_half_open</span>() <span class="sc">+</span> </span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="index.en_files/figure-html/histo-dots2-1.png" width="672" /></p>
<!-- At this orientation, maybe a name for it is "drip-plot" -->
<p>And then there is the typical raincloud, featured at the beginning of this post, with ‘rainy’ dots being drawn with <code>gghalves::geom_half_point</code>, coupled with a boxplot for flavor. Note how the boxes and 50% region are consistent, but the whiskers and 95% shading do not always line up, reflecting different thresholds for identifying outliers. Whereas quantiles are at fixed percentiles, boxplots compute whisker length as Q1 - 1.5*IQR and Q3 + 1.5*IQR (Inter Quartile Ranges).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>raincloud <span class="ot">&lt;-</span> cloudplot <span class="sc">+</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># density slab</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_slab</span>(<span class="at">side =</span> <span class="st">&quot;right&quot;</span>, <span class="at">scale =</span> <span class="fl">0.4</span>,<span class="at">show.legend =</span> F,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">8</span>),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">fill_ramp =</span> <span class="fu">stat</span>(level)),<span class="at">.width =</span> <span class="fu">c</span>(.<span class="dv">50</span>, .<span class="dv">95</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dots</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    gghalves<span class="sc">::</span><span class="fu">geom_half_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> owner),</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">position =</span> <span class="fu">position_dodge2nudge</span>(),</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>                            <span class="at">side =</span> <span class="st">&quot;l&quot;</span>, <span class="at">range_scale =</span> .<span class="dv">5</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                            <span class="at">alpha =</span> .<span class="dv">6</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>   <span class="co"># boxplot</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">05</span>,<span class="at">alpha =</span> .<span class="dv">5</span>,<span class="at">outlier.alpha=</span><span class="dv">0</span>,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width  =</span> .<span class="dv">8</span>),<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>   <span class="co"># dot-whisker for means</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>   <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> <span class="st">&quot;mean_cl_normal&quot;</span>,<span class="at">show.legend =</span> <span class="cn">FALSE</span>,<span class="at">size =</span> .<span class="dv">4</span>,</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge2nudge</span>(<span class="at">x=</span>.<span class="dv">06</span>,<span class="at">width =</span> .<span class="dv">8</span>))  <span class="sc">+</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="index.en_files/figure-html/show-raincloud-1.png" width="672" /></p>
<p>Other features like a median are also easy enough to add with point geoms. A nicer option though would be to put a single line through the distribution at the median.</p>
<p>Hopefully some day we can get the option to have fadeclouds mirror each other, like in split violin plots and some of the new options in <code>raincloudplots</code>. In addition to helping to emphasize groups at the same axis level, it might save some space in the event of extremely high density peaks, allowing peaks to face away from each other.</p>
<p>Hopefully many packages, including <code>ggdist</code> and <code>gghalves</code>, will eventually be compatible with <code>ggpp::position_dodge2nudge</code>, which allows simultaneous dodging and nudging. For something like a raincloud plot, trying to jostle around multiple geoms that can vary greatly in their width requires an extra bit of control. For instance, a nudge option could help to separate the dots from the density plot, increasing the legibility of each. <code>ggdist</code> does have a <code>position_dodgejust</code> function that tries to preserve the unique location of each element, I haven’t used it much, but regular dodging and nudging tends to come easier to me.</p>
</div>
<div id="violin-points" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Violin points</h1>
<p>One appealing method is to just use raw data. As mentioned earlier, with a smaller number of quantiles (“bins” for a range of values), stacked points start to look like a density distribution anyway.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>vipo <span class="ot">&lt;-</span> cloudplot <span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dots</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_dots</span>(<span class="at">side =</span> <span class="st">&quot;both&quot;</span>,<span class="at">scale =</span> <span class="fl">0.6</span>,<span class="at">show.legend =</span> T,<span class="at">dotsize =</span> <span class="fl">1.5</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">8</span>),<span class="fu">aes</span>(<span class="at">color =</span> owner)) <span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dot-whisker for means</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> <span class="st">&quot;mean_cl_normal&quot;</span>,<span class="at">show.legend =</span> <span class="cn">FALSE</span>,<span class="at">size =</span> .<span class="dv">2</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge2nudge</span>(<span class="at">width =</span> .<span class="dv">8</span>))<span class="sc">+</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>       <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;Basic violin points&quot;</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>vipo_box <span class="ot">&lt;-</span> cloudplot <span class="sc">+</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># dots</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>     <span class="fu">stat_dots</span>(<span class="at">scale =</span> <span class="fl">0.6</span>,<span class="at">show.legend =</span> T,<span class="at">dotsize =</span> <span class="fl">1.5</span>,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">8</span>),<span class="fu">aes</span>(<span class="at">color =</span> owner)) <span class="sc">+</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#boxplot   </span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">05</span>,<span class="at">alpha =</span> .<span class="dv">5</span>,<span class="at">outlier.alpha=</span><span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;grey&quot;</span>,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width  =</span> .<span class="dv">8</span>),<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dot-whisker for means</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> <span class="st">&quot;mean_cl_normal&quot;</span>,<span class="at">show.legend =</span> <span class="cn">FALSE</span>,<span class="at">size =</span> .<span class="dv">2</span>,</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge2nudge</span>(<span class="at">width =</span> .<span class="dv">8</span>,<span class="at">x =</span> <span class="sc">-</span>.<span class="dv">08</span>))<span class="sc">+</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>       <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)<span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;Points with boxplot&quot;</span>)</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>vipo_int <span class="ot">&lt;-</span> cloudplot <span class="sc">+</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># dots</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>     <span class="fu">stat_dots</span>(<span class="at">scale =</span> <span class="fl">0.6</span>,<span class="at">show.legend =</span> T,<span class="at">dotsize =</span> <span class="fl">1.5</span>,</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">8</span>),<span class="fu">aes</span>(<span class="at">color =</span> owner)) <span class="sc">+</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="co"># ggdist interval</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="fu">stat_pointinterval</span>(<span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">8</span>),<span class="at">show.legend =</span> F, <span class="at">color=</span><span class="st">&quot;dark grey&quot;</span>,</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>                   <span class="at">interval_size_range =</span> <span class="fu">c</span>(<span class="fl">0.2</span>, .<span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>                     <span class="co"># c(2, 20)) +</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dot-whisker for means</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> <span class="st">&quot;mean_cl_normal&quot;</span>,<span class="at">show.legend =</span> <span class="cn">FALSE</span>,<span class="at">size =</span> .<span class="dv">2</span>,</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge2nudge</span>(<span class="at">width =</span> .<span class="dv">8</span>,<span class="at">x =</span> <span class="sc">-</span>.<span class="dv">06</span>))<span class="sc">+</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>       <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;data with point interval&quot;</span>)</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>vipo_fade <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df, <span class="fu">aes</span>(<span class="at">y =</span> score, <span class="at">x =</span> genotype)) <span class="sc">+</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_dots</span>(<span class="at">side =</span> <span class="st">&quot;both&quot;</span>, <span class="at">scale =</span> <span class="fl">0.4</span>, <span class="at">show.legend =</span> T, <span class="at">dotsize =</span> <span class="fl">1.5</span>,</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">8</span>), <span class="fu">aes</span>(<span class="at">colour_ramp =</span> <span class="fu">stat</span>(level),<span class="at">color =</span> owner, <span class="at">fill_ramp =</span> <span class="fu">stat</span>(level),<span class="at">fill =</span> owner)) <span class="sc">+</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_colour_ramp_discrete</span>( <span class="at">from =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>  <span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.7</span>, <span class="dv">1</span>), <span class="at">aesthetics =</span> <span class="st">&quot;clour_ramp&quot;</span>) <span class="sc">+</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a><span class="co"># scale_fill_ramp_discrete(  from = &quot;white&quot;,</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a><span class="co">#   range = c(0.7, 1), aesthetics = &quot;fill_ramp&quot;) +</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> cbPalette, <span class="at">aesthetics =</span> <span class="fu">c</span>(<span class="st">&quot;colour&quot;</span>,<span class="st">&quot;fill&quot;</span>))<span class="sc">+</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour_ramp =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span> </span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_half_open</span>() <span class="sc">+</span></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>       <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)<span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;Fading points&quot;</span>)</span></code></pre></div>
<p><img src="index.en_files/figure-html/arrange-1.png" width="672" /></p>
<p>These plots are small, but that can be helpful to get a sense of what is makes sense at a glance. Fading out the raw data doesn’t seem to be the way to go. I didn’t expect the stacked raw data with a boxplot to look as good as it does.</p>
</div>
<div id="final-review" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Final review</h1>
<p>Below is a final collection of my favorite plotting designs. Take a look and see what suits your priorities. I’ve been partial to violin points for a while, but have come to appreciate some further information on the distribution. Density plots are nice for really showcasing the peaks and valleys of the whole dataset, in a way that boxplots and raw data do not always do. With larger samples, density plots will tend to lose this unique contribution, and you can probably use more raw data, depending on the bin widths you’re comfortable with.
To this end, for small-ish sample sizes, the faded violin plots offer an excellent way to visualize a streamlined distribution. If you’re set on seeing some raw data, I like both the stacked points with a box plot and the fadecloud. The box plot with stacking plot omits some higher-level distributional information, but is ultimately a more simple graphic. Between the two “whole picture” options of the fadecloud and the traditional raincloud, my bias is obvious, having gone through all the work to say the fadecloud is worthwhile. To look at the plots side by side though, my intuition seemed correct; the fadecloud gives a similar amount of information without having to occupy the reader’s attention with another boxplot. Likewise, the stacking of data points does seem to make it easier to identify small-scale concentrations of data.</p>
<p><img src="index.en_files/figure-html/arrange-new-1.png" width="672" /></p>
<p><img src="index.en_files/figure-html/arrange-new1-1.png" width="672" /></p>
<details>
<summary>
<strong>Show me the code for those last plots!</strong>
</summary>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>new_raincloud  <span class="ot">&lt;-</span> cloudplot <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># density slab</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_slab</span>(<span class="at">side =</span> <span class="st">&quot;left&quot;</span>, <span class="at">scale =</span> <span class="fl">0.4</span>,<span class="at">show.legend =</span> F, <span class="at">alpha =</span> .<span class="dv">7</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dots</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    gghalves<span class="sc">::</span><span class="fu">geom_half_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> owner),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>                            <span class="at">position =</span> <span class="fu">position_dodge2nudge</span>(),</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">side =</span> <span class="st">&quot;r&quot;</span>, <span class="at">range_scale =</span> .<span class="dv">5</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>                            <span class="at">alpha =</span> .<span class="dv">6</span>, <span class="at">size =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>   <span class="co"># boxplot</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">05</span>,<span class="at">alpha =</span> .<span class="dv">5</span>,<span class="at">outlier.alpha=</span><span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;dark grey&quot;</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width  =</span> .<span class="dv">8</span>),<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>   <span class="co"># dot-whisker for means</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> <span class="st">&quot;mean_cl_normal&quot;</span>,<span class="at">show.legend =</span> <span class="cn">FALSE</span>,<span class="at">size =</span> .<span class="dv">2</span>,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge2nudge</span>(<span class="at">width =</span> .<span class="dv">8</span>,<span class="at">x =</span> <span class="sc">-</span>.<span class="dv">06</span>)) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;Regular raincloud&quot;</span>)<span class="sc">+</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>       <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>new_fadecloud <span class="ot">&lt;-</span> cloudplot <span class="sc">+</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_slab</span>(<span class="at">side =</span> <span class="st">&quot;left&quot;</span>, <span class="at">scale =</span> <span class="fl">0.4</span>,<span class="at">show.legend =</span> F,</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">8</span>),</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">fill_ramp =</span> <span class="fu">stat</span>(level)),<span class="at">.width =</span> <span class="fu">c</span>(.<span class="dv">50</span>, .<span class="dv">95</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dots</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="fu">stat_dots</span>(<span class="at">scale =</span> <span class="fl">0.6</span>,<span class="at">show.legend =</span> T,<span class="at">dotsize =</span> <span class="fl">1.5</span>,</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">8</span>),<span class="fu">aes</span>(<span class="at">color =</span> owner)) <span class="sc">+</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dot-whisker for means</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> <span class="st">&quot;mean_cl_normal&quot;</span>,<span class="at">show.legend =</span> <span class="cn">FALSE</span>,<span class="at">size =</span> .<span class="dv">2</span>,</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge2nudge</span>(<span class="at">width =</span> .<span class="dv">8</span>,<span class="at">x =</span> <span class="sc">-</span>.<span class="dv">06</span>))<span class="sc">+</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;New fadecloud&quot;</span>)<span class="sc">+</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>new_vio <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df, <span class="fu">aes</span>(<span class="at">y =</span> score, <span class="at">x =</span> genotype, <span class="at">group =</span> owner)) <span class="sc">+</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># density distribution slab</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_slab</span>(<span class="at">side =</span> <span class="st">&quot;both&quot;</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>            <span class="at">scale =</span> <span class="fl">0.5</span>, <span class="co"># defines the height that a slab can reach</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width=</span>.<span class="dv">7</span>), <span class="co"># distance between elements for dodging</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">fill_ramp =</span> <span class="fu">stat</span>(level),<span class="at">fill=</span>owner), </span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>            <span class="at">.width =</span> <span class="fu">c</span>(.<span class="dv">5</span>, .<span class="dv">95</span>, <span class="dv">1</span>)) <span class="sc">+</span>  <span class="co"># set quantiles for shading</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> <span class="st">&quot;mean_cl_normal&quot;</span>,<span class="at">show.legend =</span> <span class="cn">FALSE</span>,<span class="at">size =</span> .<span class="dv">2</span>,</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge2nudge</span>(<span class="at">width =</span> .<span class="dv">7</span>))<span class="sc">+</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a><span class="co"># styling</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_ramp_discrete</span>(<span class="at">from=</span><span class="st">&#39;white&#39;</span>, <span class="at">aesthetics =</span> <span class="st">&quot;fill_ramp&quot;</span>)<span class="sc">+</span> <span class="co"># set ramping color</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>( <span class="co"># change name and display of legend elements</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>           <span class="at">color=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span> <span class="co"># suppresses color legend item) </span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> cbPalette, <span class="at">aesthetics =</span> <span class="fu">c</span>(<span class="st">&quot;colour&quot;</span>,<span class="st">&quot;fill&quot;</span>))<span class="sc">+</span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_half_open</span>() <span class="sc">+</span>   <span class="fu">guides</span>(<span class="at">fill_ramp =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;Faded violin&quot;</span>)<span class="sc">+</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
</details>
</div>
